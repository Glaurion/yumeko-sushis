<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Merci — YUMEKO SUSHIS</title>

  <!-- Police Poppins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">

  <link rel="icon" type="image/png" href="images/favicon.png" />
  <link rel="apple-touch-icon" href="images/favicon.png" />
  <meta name="theme-color" content="#ff4d6d" />

  <style>
    /* ===== Palette lumineuse "Sakura & Matcha" ===== */
    :root{
      --brand:#ff4d6d; /* sakura */
      --brand-2:#e63956;

      --text:#1a1a1a;
      --muted:#5c6870;

      --bg-1:#fffaf3; /* riz */
      --bg-2:#ffe5ec; /* sakura */

      --card:#ffffff;
      --card-border:rgba(0,0,0,.06);

      --accent:#ffd166; /* yuzu */
      --accent-2:#ffc300;
      --matcha:#17a36b;
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(255,255,255,.6), transparent 60%),
        linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    /* ===== Header ===== */
    .site-header.jp{
      background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.55));
      border-bottom: 1px solid var(--card-border);
      position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(125%) blur(6px);
    }
    .site-header .header-inner{
      width:min(96%,1100px); margin:0 auto; padding:14px 8px 10px;
      display:flex; flex-direction:column; align-items:center; gap:8px;
    }
    .brand{ display:flex; flex-direction:column; align-items:center; gap:6px; text-decoration:none; }
    .logo{
      width:160px; height:160px; border-radius:50%; object-fit:cover; background:#fff;
      box-shadow:0 8px 24px rgba(255,77,109,.15);
      border:3px solid rgba(255,77,109,.15);
    }
    @media (min-width:768px){ .logo{ width:200px; height:200px; } }
    .brand-text h1{ margin:0; letter-spacing:2px; font-weight:800; font-size:1.35rem; color:#1e1e1e; text-align:center; }
    .jp-top{ display:block; font-size:.85rem; color:#c2173b; letter-spacing:.35em; text-align:center; opacity:.85; }

    .main-nav{ display:flex; align-items:center; gap:8px; margin-top:6px; font-weight:600; }
    .main-nav .sep{ color:#7a7a7a; opacity:.6; }
    .main-nav a{
      color:#222; text-decoration:none; padding:6px 10px; border-radius:10px; opacity:.95;
      transition:filter .15s ease, transform .15s ease, background .15s ease;
    }
    .main-nav a:hover{ opacity:1; transform:translateY(-1px); background:rgba(0,0,0,.04); }
    .main-nav a.active{ background:rgba(255,77,109,.12); color:#c2173b; }

    /* ===== HERO ===== */
    .hero{ padding:50px 20px 36px; text-align:center; }
    .hero .logo{ width:150px; height:150px; }
    @media (min-width:768px){ .hero .logo{ width:180px; height:180px; } }
    h1.brand{ font-size:2.3rem; margin:14px 0 4px; letter-spacing:1px; font-weight:800; color:#c2173b; }

    /* ===== Layout ===== */
    .container{ max-width:900px; margin:0 auto; padding:20px; }
    .section{ background:var(--card); border:1px solid var(--card-border); border-radius:18px; padding:24px; box-shadow:0 12px 30px rgba(255,77,109,.08), 0 4px 14px rgba(0,0,0,.04); margin-bottom:25px; }
    .muted{ color:var(--muted); font-size:.95rem; }

    /* ===== MERCI ===== */
    .thanks-wrap{ display:flex; flex-direction:column; gap:14px; align-items:center; text-align:center; }
    .thanks-title{ margin:0 0 6px; font-size:1.7rem; color:#c2173b; }
    .recap-block{ width:min(800px,100%); text-align:left; background:#fff8fc; border:1px solid var(--card-border); border-radius:14px; padding:14px; white-space:pre-wrap; overflow:auto; max-height:50vh; color:#333; }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:4px; }
    .button{ background:var(--accent); color:#111; border:none; border-radius:12px; font-weight:800; padding:11px 16px; cursor:pointer; text-decoration:none; transition:transform .12s ease, filter .12s ease; }
    .button:hover{ transform:translateY(-1px); filter:brightness(1.05); }

    footer{ text-align:center; color:#6b6b6b; margin:28px 0 36px; font-size:.9rem; }

    /* Accessibilité */
    :focus-visible{ outline:3px solid var(--brand); outline-offset:3px; border-radius:8px; }
    @media (prefers-reduced-motion:reduce){ *{ transition:none !important; animation:none !important; scroll-behavior:auto; } }

    /* ===== Confettis Sakura (B1 — Hanami Party) ===== */
    .confetti-layer{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:9999; }
    .confetti-layer.fadeout{ animation: confetti-fade .6s ease forwards; }
    @keyframes confetti-fade{ to{ opacity:0; } }

    .petal, .confetti-dot{ position:absolute; will-change:transform, opacity; opacity:.95; }
    .petal{ width:16px; height:12px; background:#ff4d6d; border-radius:70% 70% 70% 70% / 90% 90% 35% 35%; filter: drop-shadow(0 2px 2px rgba(230,57,86,.25)); transform: rotate(15deg); animation: fall var(--dur) linear forwards, sway var(--swayDur) ease-in-out infinite alternate; }
    .petal::after{ content:""; position:absolute; inset:20% 35% auto auto; bottom:15%; width:2px; height:60%; background:linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,0)); border-radius:2px; transform: rotate(-10deg); opacity:.7; }
    .confetti-dot{ width:6px; height:6px; border-radius:50%; background: var(--c, #ffd166); box-shadow:0 1px 0 rgba(0,0,0,.08); animation: fall var(--dur) linear forwards, drift var(--driftDur) ease-in-out infinite alternate; }

    @keyframes fall{ to{ transform: translateY(110vh) rotate(var(--rot, 0deg)); opacity:.98; } }
    @keyframes sway{ to{ transform: translateX(var(--sx, 24px)) translateY(110vh) rotate(var(--rot, 0deg)); } }
    @keyframes drift{ to{ transform: translateX(var(--dx, 18px)) translateY(110vh) rotate(var(--rot, 0deg)); } }

    @media (prefers-reduced-motion: reduce){ .confetti-layer, .petal, .confetti-dot{ display:none !important; } }
  </style>
</head>
<body>

  <!-- ===== Header ===== -->
  <header class="site-header jp">
    <div class="header-inner">
      <a href="accueil.html" class="brand">
        <img src="images/logo-yumeko.png" alt="YUMEKO SUSHIS" class="logo" />
        <div class="brand-text">
          <span class="jp-top">夢猫鮨</span>
          <h1>YUMEKO SUSHIS</h1>
        </div>
      </a>

      <nav class="main-nav" aria-label="Navigation principale">
        <a href="accueil.html">Accueil</a>
        <span class="sep">・</span>
        <a href="index.html">Menu</a>
      </nav>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="hero">
    <img src="images/logo-yumeko.png" alt="YUMEKO SUSHIS" class="logo" loading="lazy" decoding="async">
    <h1 class="brand">YUMEKO SUSHIS</h1>
  </section>

  <main class="container">
    <section class="section">
      <div class="thanks-wrap">
        <h2 class="thanks-title">Merci pour votre commande !</h2>
        <p class="muted">Nous avons bien reçu votre commande. Voici votre récapitulatif :</p>

        <pre id="orderRecap" class="recap-block">(Chargement du récapitulatif…)</pre>

        <div class="actions">
          <a class="button" href="accueil.html">Retour à l’accueil</a>
          <a class="button" href="index.html#menu">Nouvelle commande</a>
        </div>
      </div>
    </section>
  </main>

  <footer>© 2025 YUMEKO SUSHIS — Les sushis qui font ronronner vos papilles</footer>

  <script>
    // Récupère le récap et supprime l’intitulé "Articles :"
    document.addEventListener('DOMContentLoaded', () => {
      const recapEl = document.getElementById('orderRecap');
      let text = '';
      try { text = localStorage.getItem('yumeko_last_order') || ''; } catch(e){}

      if(!text.trim()){
        recapEl.textContent = "Aucun récapitulatif trouvé.\n\nAstuce : passez une commande depuis le menu pour voir le détail ici.";
        return;
      }

      const cleaned = text.replace(/\n?Articles\s*:\s*\n?/i, '');
      recapEl.textContent = cleaned.trim();
    });

    // Active l’onglet courant
    (function(){
      const here = location.pathname.split('/').pop() || 'merci.html';
      document.querySelectorAll('.main-nav a').forEach(a=>{
        const href = a.getAttribute('href');
        if(href && !href.startsWith('#') && here === href) a.classList.add('active');
      });
    })();
  </script>

  <script>
    // === Confettis Sakura B1 — Hanami Party ===
    (function(){
      const DURATION = 3200; // ms d'émission
      const PETALS = 26;     // pétales (léger)
      const DOTS = 24;       // confettis ronds discrets

      const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(reduce) return;

      const layer = document.createElement('div');
      layer.className = 'confetti-layer';
      document.body.appendChild(layer);

      const vw = () => Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
      function rand(a,b){ return Math.random()*(b-a)+a; }

      function makePetal(){
        const el = document.createElement('span');
        el.className = 'petal';
        const startX = rand(-20, vw()+20);
        el.style.left = startX+'px';
        el.style.top = rand(-40, -10)+'px';
        el.style.setProperty('--dur', rand(2800, 5200)+'ms');
        el.style.setProperty('--swayDur', rand(1200, 2000)+'ms');
        el.style.setProperty('--sx', rand(18, 38)+'px');
        el.style.setProperty('--rot', rand(-80, 80)+'deg');
        const s = rand(0.8, 1.2);
        el.style.transform += ` scale(${s})`;
        if(Math.random() < .35) el.style.background = '#ffa3b5';
        return el;
      }
      function makeDot(){
        const el = document.createElement('span');
        el.className = 'confetti-dot';
        el.style.left = rand(-20, vw()+20)+'px';
        el.style.top = rand(-40, -10)+'px';
        el.style.setProperty('--dur', rand(2400, 4200)+'ms');
        el.style.setProperty('--driftDur', rand(900, 1500)+'ms');
        el.style.setProperty('--dx', rand(12, 28)+'px');
        el.style.setProperty('--rot', rand(-45, 45)+'deg');
        const palette = ['#ff4d6d', '#ffd166', '#17a36b'];
        el.style.setProperty('--c', palette[Math.floor(rand(0, palette.length))]);
        const s = rand(.7, 1.15);
        el.style.transform += ` scale(${s})`;
        return el;
      }

      let running = true;
      const start = performance.now();
      function emit(){
        if(!running) return;
        const now = performance.now();
        if(now - start < DURATION){
          if(Math.random() < 0.9 && layer.childElementCount < 120) layer.appendChild(makePetal());
        if(Math.random() < 0.8 && layer.childElementCount < 120) layer.appendChild(makeDot());
          requestAnimationFrame(emit);
        }else{
          running = false;
          setTimeout(()=>{
            layer.classList.add('fadeout');
            setTimeout(()=> layer.remove(), 700);
          }, 1500);
        }
      }

      // Pré-seed pour un effet immédiat
      for(let i=0;i<PETALS;i++) layer.appendChild(makePetal());
      for(let i=0;i/DOTS;i++) layer.appendChild(makeDot());
      requestAnimationFrame(emit);
    })();
  </script>
</body>
</html>
