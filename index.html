<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YUMEKO SUSHIS</title>

  <style>
    :root{
      --brand:#8b0000;
      --brand-2:#a31212;
      --text:#f8f8f8;
      --card:#1b1b1b;
      --muted:#cfcfcf;
      --accent:#ffb6b6;
      --accent-2:#ff8c8c;
      --barShade:.35;
    }

    #orderSection { display: none !important; }
    *{ box-sizing: border-box; }

    body{
      margin:0; font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background: linear-gradient(180deg, #0f0f0f 0%, #8b0000 100%);
      color:var(--text); min-height:100vh;
    }

    .hero{
      background:linear-gradient(to bottom,rgba(0,0,0,.55),rgba(0,0,0,.75)),url('images/hero.jpg') center/cover no-repeat;
      padding:60px 20px; text-align:center;
    }
    h1.brand{ font-size:2.5rem; margin:10px 0; letter-spacing:2px; font-weight:800; }
    .cta{ background:var(--brand); border:none; color:#fff; padding:14px 18px; border-radius:10px; font-weight:800; cursor:pointer; }
    .cta:hover{ background:var(--brand-2); }

    .container{ max-width:1100px; margin:0 auto; padding:20px; }
    .section{ background:#160c0c; border:1px solid rgba(255,255,255,.08); border-radius:18px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.25); margin-bottom:25px;}
    .section-title{ color:#fff; font-size:1.8rem; margin-bottom:10px; }

    .menu-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:12px; }
    .item-card{ background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:12px; display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .left{ display:flex; align-items:center; gap:10px; min-width:0; }
    .thumb{ width:60px; height:60px; border-radius:10px; object-fit:cover; background:#0d0d0d; box-shadow:0 0 8px rgba(0,0,0,.35); }
    .item-name{ font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .controls{ display:flex; align-items:center; gap:8px; }
    .btn{ background:var(--accent); border:none; color:#111; width:34px; height:34px; border-radius:50%; font-weight:900; cursor:pointer; transition:transform .15s; }
    .btn:hover{ background:var(--accent-2); transform:scale(1.1); }
    .qty{ min-width:22px; text-align:center; font-weight:800; }
    .qty.bump{ transform:scale(1.15); transition:transform .2s; }

    form input, form textarea{ width:90%; max-width:520px; background:#161616; color:#fff; border:1px solid rgba(255,255,255,.2); border-radius:10px; padding:10px; margin:6px auto; display:block; }
    textarea{ resize:vertical; min-height:90px; }
    .muted{ color:#cfcfcf; opacity:.95; font-size:14px; }

    #stickyBar{
      position:fixed; bottom:0; left:0; right:0; z-index:100;
      background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,var(--barShade)));
      padding:10px;
    }
    #stickyInner{ width:min(96%,1100px); margin:0 auto; display:flex; flex-direction:column; gap:8px; }
    #gotoOrder{ width:100%; background:var(--brand); color:#fff; font-weight:900; border:none; border-radius:12px; padding:14px; cursor:pointer; }

    #cartSheet{
      position:fixed; left:50%; transform:translateX(-50%); bottom:-100%;
      width:min(96%,1100px); background:#1b1b1b; color:#fff;
      border:1px solid rgba(255,255,255,.12); border-radius:16px 16px 0 0;
      box-shadow:0 22px 60px rgba(0,0,0,.45); max-height:70vh;
      display:flex; flex-direction:column; transition:bottom .28s ease; z-index:101;
    }
    #cartSheet.open{ bottom:62px; }
    #cartSheet header, #cartSheet footer{ padding:10px 12px; display:flex; align-items:center; justify-content:space-between; }
    #cartSheet header{ border-bottom:1px solid rgba(255,255,255,.1); }
    #cartSheet footer{ border-top:1px solid rgba(255,255,255,.1); gap:10px; justify-content:flex-end; }

    .recap-item img.thumb { width:45px; height:45px; border-radius:8px; object-fit:cover; }

    .btn-ghost, .btn-primary{
      border:none; border-radius:12px; padding:12px 16px; font-weight:900; cursor:pointer;
    }
    .btn-ghost{ background:#2a2a2a; color:#fff; }
    .btn-primary{ background:var(--brand); color:#fff; }
    .btn-primary:hover{ background:var(--brand-2); }

    footer{ text-align:center; color:#d7d7d7; margin:60px 0 120px; }

    #toast {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%) translateY(100%);
      background: #111;
      color: #fff;
      padding: 14px 22px;
      border-radius: 12px;
      font-weight: 600;
      opacity: 0;
      transition: all 0.4s ease;
      z-index: 200;
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }
    #toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }
  </style>
</head>
<body>

  <section class="hero">
    <img src="images/logo-yumeko.png" alt="YUMEKO SUSHIS" width="120" style="border-radius:50%;box-shadow:0 0 10px rgba(0,0,0,.3)">
    <h1 class="brand">üç£ YUMEKO SUSHIS üç£</h1>
    <p>Commandez vos sushis pr√©f√©r√©s simplement ici üç±</p>
    <button class="cta" id="ctaOrder">Commander maintenant</button>
  </section>

  <main class="container">
    <section class="section" id="menuSection">
      <h2 class="section-title">Menu</h2>
      <div id="menu"></div>
    </section>

    <section class="section" id="orderSection">
      <form id="orderForm" action="https://formspree.io/f/xblzvgjr" method="POST">
        <input name="first_name" placeholder="Pr√©nom" required>
        <input name="last_name" placeholder="Nom" required>
        <input name="phone" placeholder="T√©l√©phone" required>
        <textarea name="comments" id="comments" placeholder="Commentaire (allergies ou autres)"></textarea>
      </form>
    </section>
  </main>

  <div id="stickyBar">
    <div id="stickyInner">
      <button id="gotoOrder">Panier (0) ‚Ä¢ Valider</button>
    </div>
  </div>

  <div id="cartSheet">
    <header>
      <h3>Valider votre commande</h3>
      <button id="sheetClose" aria-label="Fermer">√ó</button>
    </header>
    <div class="body">
      <div id="stepCart" class="step active">
        <ul class="recap-list" id="recapList"></ul>
      </div>
      <div id="stepDetails" class="step"></div>
    </div>
    <footer>
      <div id="footerCart" class="step active">
        <button class="btn-primary" id="goDetails">Valider le panier ‚Üí</button>
      </div>
      <div id="footerDetails" class="step">
        <button class="btn-ghost" id="backToCart">‚Üê Retour</button>
        <button class="btn-primary" id="confirmSend">Confirmer et envoyer</button>
      </div>
    </footer>
  </div>

  <div id="toast">Commande envoy√©e avec succ√®s ‚úÖ</div>

  <footer>¬© 2025 YUMEKO SUSHIS</footer>

  <script>
  const categories = {
    'Maki 4 pi√®ces': [
      'M1- Saumon','M2- Saumon/Avocat','M3- Saumon/Cheese',
      'M5- Concombre','M6- Concombre/Cheese','M7- Avocat','M8- Avocat/Cheese','M9- Fromage'
    ],
    'California 4 pi√®ces': [
      'C1- Saumon','C2- Saumon/Avocat','C3- Saumon/Cheese',
      'C5- Concombre','C6- Concombre/Cheese','C7- Avocat','C8- Avocat/Cheese','C9- Fromage'
    ],
    'Maki printemps 4 pi√®ces': [
      'P1- Saumon/Avocat','P2- Saumon/Fromage','P3- Concombre/Fromage','P4- Avocat/Fromage'
    ],
    'Signature 4 pi√®ces': [
      'S1- California Saumon/Cheese/Oignons frits','S2- Rols Saumon/Avocat/Cheese'
    ],
    'Sashimi 2 pi√®ces': ['Saumon'],
    'Nigiri 2 pi√®ces': ['N1- Saumon','N2- Avocat']
  };

  // === Construction menu ===
  const menu=document.getElementById('menu');
  for(const [cat,items] of Object.entries(categories)){
    const wrap=document.createElement('div');
    wrap.innerHTML=`<h3>${cat}</h3><div class="menu-grid"></div>`;
    const grid=wrap.querySelector('.menu-grid');
    items.forEach(item=>{
      const code=item.split('-')[0].trim();
      const name=item.split('-').slice(1).join('-').trim();
      const card=document.createElement('div');
      card.className='item-card';
      card.innerHTML=`
        <div class="left">
          <img class="thumb" src="images/${code.toLowerCase()}.jpg" alt="${name}" onerror="this.style.display='none'">
          <div class="item-name">${name}</div>
        </div>
        <div class="controls">
          <button class="btn minus" data-item="${item}">‚àí</button>
          <span class="qty" data-item="${item}">0</span>
          <button class="btn plus" data-item="${item}">+</button>
        </div>`;
      grid.appendChild(card);
    });
    menu.appendChild(wrap);
  }

  function bump(el){ el.classList.add('bump'); setTimeout(()=>el.classList.remove('bump'),200); }
  function getTotal(){ let t=0; document.querySelectorAll('.qty[data-item]').forEach(q=>t+=parseInt(q.textContent)||0); return t; }
  function updateSticky(){ document.getElementById('gotoOrder').textContent = `Panier (${getTotal()}) ‚Ä¢ Valider`; }

  document.addEventListener('click', e=>{
    if(e.target.classList.contains('plus')||e.target.classList.contains('minus')){
      const inc=e.target.classList.contains('plus')?1:-1;
      const item=e.target.dataset.item;
      const span=document.querySelector(`.qty[data-item="${CSS.escape(item)}"]`);
      const v=Math.max(0,(parseInt(span.textContent)||0)+inc);
      span.textContent=v;bump(span);updateSticky();
    }
  });

  const sheet=document.getElementById('cartSheet');
  const recapList=document.getElementById('recapList');
  const btnOpen=document.getElementById('gotoOrder');
  const btnClose=document.getElementById('sheetClose');
  const btnGoDetails=document.getElementById('goDetails');
  const btnBack=document.getElementById('backToCart');
  const btnConfirm=document.getElementById('confirmSend');
  const form=document.getElementById('orderForm');
  const stepCart=document.getElementById('stepCart');
  const stepDetails=document.getElementById('stepDetails');
  const footCart=document.getElementById('footerCart');
  const footDetails=document.getElementById('footerDetails');
  const toast=document.getElementById('toast');

  if(form) stepDetails.appendChild(form);

  function getCartItems(){
    const items=[];
    document.querySelectorAll('.qty[data-item]').forEach(span=>{
      const qty=parseInt(span.textContent)||0;
      if(qty>0) items.push({label:span.dataset.item,qty});
    });
    return items;
  }

  function buildRecap(){
    const items=getCartItems();
    recapList.innerHTML='';
    if(items.length===0){recapList.innerHTML='<li class="muted">Aucun article</li>';return;}
    items.forEach(({label,qty})=>{
      const code=label.split('-')[0].trim().toLowerCase();
      const name=label.split('-').slice(1).join('-').trim();
      const li=document.createElement('li');
      li.className='recap-item';
      li.innerHTML=`
        <div class="left">
          <img src="images/${code}.jpg" alt="${name}" class="thumb" onerror="this.style.display='none'">
          <span class="it-label">${name}</span>
        </div>
        <div class="it-ctrl">
          <button class="btn recap-minus" data-item="${label}">‚àí</button>
          <span class="qty">${qty}</span>
          <button class="btn recap-plus" data-item="${label}">+</button>
        </div>`;
      recapList.appendChild(li);
    });
  }

  function setStep(which){
    const cart = which === 'cart';
    stepCart.classList.toggle('active',cart);
    stepDetails.classList.toggle('active',!cart);
    footCart.classList.toggle('active',cart);
    footDetails.classList.toggle('active',!cart);
  }

  btnOpen.onclick=()=>{buildRecap();setStep('cart');sheet.classList.add('open');};
  btnClose.onclick=()=>sheet.classList.remove('open');
  btnGoDetails.onclick=()=>setStep('details');
  btnBack.onclick=()=>setStep('cart');

  recapList.addEventListener('click',e=>{
    const btn=e.target.closest('.recap-plus,.recap-minus');
    if(!btn)return;
    const item=btn.dataset.item;
    const span=document.querySelector(`.qty[data-item="${CSS.escape(item)}"]`);
    if(!span)return;
    const inc=btn.classList.contains('recap-plus')?1:-1;
    const v=Math.max(0,(parseInt(span.textContent)||0)+inc);
    span.textContent=v;bump(span);updateSticky();setTimeout(buildRecap,50);
  });

  btnConfirm.onclick=()=>{
    if(!form.reportValidity()){setStep('details');return;}
    document.querySelectorAll('.qty[data-item]').forEach(q=>q.textContent='0');
    updateSticky();buildRecap();sheet.classList.remove('open');showToast();
  }

  function showToast(){
    toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'),3000);
  }
  </script>
</body>
</html>
