<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YUMEKO SUSHIS</title>
  <style>
    :root{
      --pink:#ffb6b6; --pink-dark:#ff8c8c; --bg1:#1a1a1a; --bg2:#8b0000; --text:#ffffff;
    }
    body {
      margin: 0;
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 100%);
      color: var(--text);
      text-align: center;
    }
    header { padding: 20px; }
    header img { width: 180px; border-radius: 50%; box-shadow: 0 0 15px rgba(0,0,0,0.4); }
    h1 { margin-top: 10px; font-size: 2.2rem; letter-spacing: 2px; }

    .menu-section {
      background: rgba(255,255,255,0.06);
      margin: 20px auto;
      padding: 20px;
      width: 92%;
      max-width: 860px;
      border-radius: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      text-align: left;
    }
    .menu-section h2 {
      color: var(--pink);
      border-bottom: 2px solid var(--pink);
      display: inline-block;
      padding-bottom: 5px;
    }

    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th, td { padding: 10px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); }

    /* Boutons +/‚àí centr√©s et tactiles */
    .plus, .minus {
      background-color: var(--pink);
      border: none; color: #1a1a1a; font-size: 20px; font-weight: 700;
      border-radius: 50%; width: 40px; height: 40px; cursor: pointer; margin: 0 8px;
      display: inline-flex; align-items: center; justify-content: center;
      transition: transform 0.1s ease, background-color 0.2s ease, box-shadow 0.1s ease;
      box-shadow: 0 3px 5px rgba(0,0,0,0.3);
    }
    .plus:hover, .minus:hover { background-color: var(--pink-dark); transform: scale(1.08); }
    .plus:active, .minus:active { transform: scale(0.95); box-shadow: 0 1px 2px rgba(0,0,0,0.4) inset; }

    .qty { min-width: 34px; display: inline-block; font-weight: 700; text-align: center; vertical-align: middle; transition: transform 0.2s ease; font-size: 18px; }
    .qty.bump { transform: scale(1.25); }

    /* Sticky bar mobile */
    #stickyBar { position: fixed; left: 0; right: 0; bottom: 0; z-index: 50; display: none; }
    #stickyInner { margin: 0 auto 12px; width: min(92%, 860px); backdrop-filter: blur(6px); background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.12); border-radius: 16px; padding: 10px; }
    #gotoOrder { width: 100%; background: var(--pink); color: #1a1a1a; font-weight: 800; border: none; border-radius: 12px; padding: 14px 18px; cursor: pointer; }

    footer { margin: 80px 0 100px; font-size: 0.9rem; color: #ddd; text-align:center; }

    /* ------- MOBILE OPTIM -------- */
    @media (max-width: 680px){
      header img { width: 140px; }
      h1 { font-size: 1.8rem; }
      .menu-section { padding: 16px; }
      th, td { padding: 12px 8px; }
      .plus, .minus { width: 48px; height: 48px; font-size: 22px; margin: 0 6px; }
      .qty { min-width: 36px; font-size: 19px; }

      /* Table -> cartes flex pour meilleure lisibilit√© mobile */
      table { border-collapse: separate; border-spacing: 0 10px; }
      tbody tr { display: flex; align-items: center; justify-content: space-between; background: rgba(0,0,0,0.18); border-radius: 14px; padding: 10px; border-bottom: none; }
      tbody tr td:first-child { text-align: left; }
      tbody tr td:last-child { min-width: 180px; }

      #stickyBar { display: block; }
      footer { margin-bottom: 120px; }
    }

    /* Petits contr√¥les ronds pour les options (baguettes) */
    .opt-btn { width: 34px; height: 34px; font-size: 18px; }
    .opt-qty { min-width: 28px; font-size: 16px; }
  </style>
</head>
<body>
  <header>
    <img src="logo-yumeko.png" alt="YUMEKO SUSHIS">
    <h1>üç£ YUMEKO SUSHIS üç£</h1>
    <p>Commandez vos sushis pr√©f√©r√©s simplement ici üç±</p>
  </header>

  <div id="menu"></div>

  <div class="menu-section" id="orderSection">
    <h2>Validez votre commande</h2>
    <form id="orderForm" action="https://formspree.io/f/xblzvgjr" method="POST" style="text-align:center">
      <p><input name="name" id="clientName" placeholder="Votre pr√©nom" required style="padding:10px 12px; border-radius:10px; width: min(560px, 92%);"></p>
      <p><input name="phone" id="clientPhone" placeholder="T√©l√©phone (optionnel)" style="padding:10px 12px; border-radius:10px; width: min(560px, 92%);"></p>

      <p style="margin:8px 0">
        <span style="font-size:14px;opacity:.9">Options :</span><br>
        <label><input type="checkbox" name="soja_sucree" id="optSojaSucree"> Soja sucr√©e</label>
        <label style="margin-left:12px"><input type="checkbox" name="soja_salee" id="optSojaSalee"> Soja sal√©e</label>
        <label style="margin-left:12px"><input type="checkbox" name="wasabi" id="optWasabi"> Wasabi</label>
        <label style="margin-left:12px"><input type="checkbox" name="gingembre" id="optGingembre"> Gingembre</label>
      </p>

      <!-- Baguettes avec + / - -->
      <p style="margin:8px 0">
        <span style="font-size:14px;opacity:.9;display:block;margin-bottom:6px">Baguettes :</span>
        <button class="minus opt-btn" type="button" id="bagMinus" aria-label="Retirer 1 baguette">‚àí</button>
        <span class="qty opt-qty" id="bagQty">1</span>
        <button class="plus opt-btn" type="button" id="bagPlus" aria-label="Ajouter 1 baguette">+</button>
        <input type="hidden" name="baguettes" id="bagInput" value="1">
      </p>

      <textarea name="order" id="orderText" hidden></textarea>
      <div style="display:flex; gap:8px; justify-content:center; flex-wrap:wrap">
        <button type="submit" style="margin-top:8px">Envoyer ma commande üç£</button>
      </div>
    </form>
    <div id="orderResult" style="margin-top:10px; font-size:14px; color:#e6e6e6;"></div>
  </div>

  <!-- Sticky bottom bar (mobile) -->
  <div id="stickyBar" aria-live="polite">
    <div id="stickyInner">
      <button id="gotoOrder">Panier (0) ‚Ä¢ Valider</button>
    </div>
  </div>

  <footer>¬© 2025 YUMEKO SUSHIS - Les sushis qui font ronronner vos papilles</footer>

<script>
  const categories = {
    'Maki 4 pi√®ces': ['M1- Saumon','M2- Saumon/Avocat','M3- Saumon/Cheese','M4- Thon','M5- Concombre','M6- Concombre/Cheese','M7- Avocat','M8- Avocat/Cheese'],
    'California 4 pi√®ces': ['C1- Saumon','C2- Saumon/Avocat','C3- Saumon/Cheese','C4- Thon','C5- Concombre','C6- Concombre/Cheese','C7- Avocat','C8- Avocat/Cheese'],
    'Maki printemps 4 pi√®ces': ['P1- Saumon/Avocat','P2- Saumon/Cheese','P3- Concombre/Cheese','P4- Avocat/Cheese'],
    'Signature 4 pi√®ces': ['S1- California Saumon/Cheese/Oignons frits','S2- Rols Saumon/Avocat/Cheese'],
    'Sashimi 2 pi√®ces': ['Saumon'],
    'Nigiri 2 pi√®ces': ['N1- Saumon','N2- Avocat']
  };

 <script>
  const categories = {
    'Maki 4 pi√®ces': ['M1- Saumon','M2- Saumon/Avocat','M3- Saumon/Cheese','M4- Thon','M5- Concombre','M6- Concombre/Cheese','M7- Avocat','M8- Avocat/Cheese'],
    'California 4 pi√®ces': ['C1- Saumon','C2- Saumon/Avocat','C3- Saumon/Cheese','C4- Thon','C5- Concombre','C6- Concombre/Cheese','C7- Avocat','C8- Avocat/Cheese'],
    'Maki printemps 4 pi√®ces': ['P1- Saumon/Avocat','P2- Saumon/Cheese','P3- Concombre/Cheese','P4- Avocat/Cheese'],
    'Signature 4 pi√®ces': ['S1- California Saumon/Cheese/Oignons frits','S2- Rols Saumon/Avocat/Cheese'],
    'Sashimi 2 pi√®ces': ['Saumon'],
    'Nigiri 2 pi√®ces': ['N1- Saumon','N2- Avocat']
  };

  const menuContainer = document.getElementById('menu');

  for (const [category, items] of Object.entries(categories)) {
    const section = document.createElement('div');
    section.classList.add('menu-section');
    const title = document.createElement('h2');
    title.textContent = category;
    section.appendChild(title);

    const table = document.createElement('table');
    const tbody = document.createElement('tbody');

    items.forEach(item => {
      const imgName = item.split('-')[0].trim().toLowerCase(); // ex: M1 -> m1
      const row = document.createElement('tr');
      row.innerHTML = `
        <td style="display:flex;align-items:center;gap:10px;">
          <img src="images/${imgName}.jpg" alt="${item}" 
               style="width:55px;height:55px;object-fit:cover;border-radius:8px;box-shadow:0 0 5px rgba(0,0,0,0.4);">
          <span>${item}</span>
        </td>
        <td>
          <button class="minus" data-item="${item}" aria-label="Retirer 1">‚àí</button>
          <span class="qty" data-item="${item}">0</span>
          <button class="plus" data-item="${item}" aria-label="Ajouter 1">+</button>
        </td>`;
      tbody.appendChild(row);
    });

    table.appendChild(tbody);
    section.appendChild(table);
    menuContainer.appendChild(section);
  }

  // Animation rebond + sticky
  function bumpAnimation(qtySpan) { qtySpan.classList.add('bump'); setTimeout(() => qtySpan.classList.remove('bump'), 200); }

  function getTotalItems(){
    let total = 0;
    document.querySelectorAll('.qty[data-item]').forEach(span => total += parseInt(span.textContent)||0);
    return total;
  }

  function updateSticky(){
    const total = getTotalItems();
    const btn = document.getElementById('gotoOrder');
    if(btn) btn.textContent = total>0 ? `Panier (${total}) ‚Ä¢ Valider` : 'Panier (0) ‚Ä¢ Valider';
  }

  // + et ‚àí
  document.addEventListener('click', (e) => {
    if (e.target.classList.contains('plus')) {
      const item = e.target.dataset.item;
      const qtySpan = document.querySelector(`.qty[data-item="${item}"]`);
      qtySpan.textContent = parseInt(qtySpan.textContent) + 1;
      bumpAnimation(qtySpan); updateSticky();
    }
    if (e.target.classList.contains('minus')) {
      const item = e.target.dataset.item;
      const qtySpan = document.querySelector(`.qty[data-item="${item}"]`);
      const newQty = Math.max(0, parseInt(qtySpan.textContent) - 1);
      qtySpan.textContent = newQty;
      bumpAnimation(qtySpan); updateSticky();
    }
  });

  // Soumission du formulaire
  const form = document.getElementById('orderForm');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const orders = [];
    document.querySelectorAll('.qty[data-item]').forEach(span => {
      const qty = parseInt(span.textContent);
      if (qty > 0) orders.push(`${span.dataset.item} x${qty}`);
    });

    if (orders.length === 0) {
      const res = document.getElementById('orderResult');
      res.textContent = "Ajoute au moins un article avant d'envoyer üòä";
      res.style.color = "#ffd4d4";
      return;
    }

    document.getElementById('orderText').value = orders.join('\\n');

    try {
      const resp = await fetch(form.action, { method: 'POST', headers: { 'Accept': 'application/json' }, body: new FormData(form) });
      const res = document.getElementById('orderResult');
      if (resp.ok) {
        res.textContent = "Merci ! Ta commande a bien √©t√© envoy√©e üç£";
        res.style.color = "#b7ffb7";
        document.querySelectorAll('.qty').forEach(span => span.textContent = '0');
        form.reset(); updateSticky();
      } else {
        res.textContent = "Oups, l'envoi a √©chou√©. R√©essaie üôè";
        res.style.color = "#ffd4d4";
      }
    } catch {
      const res = document.getElementById('orderResult');
      res.textContent = "Erreur r√©seau. V√©rifie ta connexion et r√©essaie.";
      res.style.color = "#ffd4d4";
    }
  });

  document.getElementById('gotoOrder').addEventListener('click', () => {
    document.getElementById('orderSection').scrollIntoView({behavior:'smooth'});
  });

  updateSticky();
</script>

</body>
</html>
